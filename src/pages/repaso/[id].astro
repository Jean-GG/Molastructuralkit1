---
import { getCollection } from 'astro:content';
import ImmersiveLayout from '../../layouts/ImmersiveLayout.astro';
import QuestionCard from '../../components/guided/QuestionCard';

export async function getStaticPaths() {
  const allQuestions = await getCollection('questions');
  return allQuestions.map(entry => ({
    params: { id: entry.slug }, // Usamos el slug (nombre del archivo) como ID
    props: { entry },
  }));
}

const { entry } = Astro.props;
// Esta función mágica convierte el Markdown a HTML/Componente
const { Content } = await entry.render();
---

<ImmersiveLayout title={`Repaso: ${entry.data.topic}`}>
    
    <div className="absolute top-0 left-0 w-full p-6 flex justify-between text-slate-500 text-sm uppercase tracking-widest z-20">
        <span>Modo Interactivo</span>
        <span>{entry.data.topic}</span>
    </div>

    <div className="flex items-center justify-center min-h-screen">
        {/* Pasamos los datos del encabezado como prop */}
        <QuestionCard questionData={entry.data} client:load>
            {/* Pasamos el contenido del Markdown como 'children' */}
            <Content />
        </QuestionCard>
    </div>

</ImmersiveLayout>