---
import { getCollection } from 'astro:content';
import ImmersiveLayout from '../../layouts/ImmersiveLayout.astro';
import QuestionCard from '../../components/guided/QuestionCard';

// 1. Generar las rutas estÃ¡ticas para CADA pregunta que exista en la carpeta content
export async function getStaticPaths() {
  const allQuestions = await getCollection('questions');
  
  return allQuestions.map(entry => ({
    params: { id: entry.data.id },
    props: { question: entry.data },
  }));
}

// 2. Obtener los datos de la pregunta actual
const { question } = Astro.props;
---

<ImmersiveLayout title={`Repaso: ${question.topic}`}>
    
    {/* Barra de progreso superior (simple) */}
    <div className="absolute top-0 left-0 w-full p-6 flex justify-between text-slate-500 text-sm uppercase tracking-widest z-20">
        <span>Modo Interactivo</span>
        <span>{question.topic}</span>
    </div>

    {/* Cargamos la "Isla" de React 
        client:load es IMPORTANTE: le dice a Astro que cargue el JS de React 
        para que funcionen los botones y animaciones 
    */}
    <div className="flex items-center justify-center min-h-screen">
        <QuestionCard questionData={question} client:load />
    </div>

</ImmersiveLayout>